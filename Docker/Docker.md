# Docker

### 도커란

+ Docker는 각 서버에 설치되며 컨테이너를 구축, 시작 또는 중단하는 데 사용할 수 있는 간단한 명령을 제공한다.

  > 컨테이너 : 라이브러리, 시스템 도구, 코드, 런타임 등 소프트웨어를 실해하는 데 필요한 모든 것이 포함됨

+ 도커를 사용하면 환경에 구애받지 않고 애플리케이션을 신속하게 배포 및 확장할 수 있다.

  > 컨테이너를 구축, 배포, 복사하고 한 환경에서 다른 환경으로 이동하는 등 유연하게 사용할 수 있다.

+  도커는 기본적으로 이미지가 있어야 컨테이너를 생성하고 동작시킬 수 있다.



### 도커를 사용해야 하는 이유

Docker를 사용하면 코드를 더 빨리 전달하고, 애플리케이션 운영을 표준화하고, 코드를 원활하게 이동하고, 리소스 사용률을 높여 비용을 절감할 수 있다.

-> Docker를 사용하지 않으면, 운영체제마다 jdk를 일일이 설치하고 이것저것 따로 설정해야 하는 게 많은데 Docker를 사용하면 그런 설정이 줄어든다.



<img src="https://d2uleea4buiacg.cloudfront.net/files/fda/fda75bc98a7a5f0dcd4a546e5454f15a7ef42972be5220b58045509b428a39d0.m.png" alt="image info" style="zoom:30%;" />

다른 도구들은 모두 도구를 실행하는 시점에 서버의 상태가 결정되는 데 비해 도커는 작업자가 그 시점을 미리 정해둘 수 있다. 덕분에 서버를 항상 똑같은 상태로 만들 수 있다.



### 컨테이너

컨테이너는 운영체제 수준에서 CPU, 메모리, 스토리지, 네트워크 리소스를 쉽게 공유할 수 있게 해주며 컨테이너가 실제로 실행되는 환경에서 애플리케이션을 추상화할 수 있는 논리 패키징 매커니즘을 제공한다.



### 도커의 기본적인 실행 순서

> Dockerfile 
>
> 필요한 최소한의 패키지를 설치하고 동작하기 위한 자신만의 설정을 담은 파일이고, 이 파일로 이미지를 생성(빌드)하게 된다. -> 서비스의 장애를 줄여주는 과정

1. Dockerfile을 작성한다.

   ```dockerfile
   FROM openjdk:11-jre-slim # 환경 : 태그
   COPY ./build/libs/*.jar app.jar # (저장될 위치 및 이름) (가져올 파일)
   ENTRYPOINT ["java","-jar","/app.jar"] # ["커맨드","파라미터1","파라미터2"...]
   ```

   + `FROM` : 어느 환경에서 실행시킬지 / 베이스 이미지 지정
   + `COPY` : 가져올 파일에서 파일을, 저장될 위치에 해당 이름으로 저장한다 / 파일 복사
   + `ENTRYPOINT` : 컨테이너를 띄울 때 항상 실행되어야 하는 커맨드를 지정할 때 사용 / 컨테이너 실행 명령
   + `ENV` : 환경변수

2. Dockerfile을 빌드하여 이미지를 생성한다.

3. 생성된 이미지를 여러 옵션들과 함께 컨테이너에서 돌린다.

